[pytest]
# 1. 搜索范围
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 2. 默认命令行参数
addopts = -v --tb=short --strict-markers --color=yes -s --cov-report=html --html=test.html --cov-fail-under=100

# 3. 自定义标记（防止警告）
markers =
    smoke: 冒烟测试
    slow: 耗时测试
    p0: 最高优先级
    online: 线上环境用例

# 4. 过滤掉某些目录/文件
norecursedirs = .git venv* __pycache__ node_modules

# 5. 控制台实时输出
log_cli = True
log_cli_level = DEBUG
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_cli_date_format = %H:%M:%S

# 6. 日志文件（可选）
log_file = log/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S